# Finance Domain Knowledge Base

constraints:
  transaction_amount:
    - type: range
      parameters:
        min: 0.01
        max: 1000000.0
      description: "Transaction amounts must be positive and reasonable"
    
    - type: precision
      parameters:
        decimal_places: 2
      description: "Currency amounts must have exactly 2 decimal places"

  account_balance:
    - type: range
      parameters:
        min: -50000.0
        max: 10000000.0
      description: "Account balance limits including overdraft"
    
    - type: precision
      parameters:
        decimal_places: 2
      description: "Balance precision to 2 decimals"

  interest_rate:
    - type: range
      parameters:
        min: 0.0
        max: 30.0
      description: "Interest rate percentage (0-30%)"
    
    - type: precision
      parameters:
        decimal_places: 2
      description: "Rate precision to 2 decimals"

  credit_score:
    - type: range
      parameters:
        min: 300
        max: 850
      description: "FICO credit score range"

  account_type:
    - type: category
      parameters:
        categories:
          - Checking
          - Savings
          - Money Market
          - CD
          - Investment
          - Credit Card
          - Loan
          - Mortgage
      description: "Valid account types"

  transaction_type:
    - type: category
      parameters:
        categories:
          - Deposit
          - Withdrawal
          - Transfer
          - Payment
          - Purchase
          - Refund
          - Fee
          - Interest
          - Dividend
      description: "Transaction categories"

  transaction_status:
    - type: category
      parameters:
        categories:
          - Completed
          - Pending
          - Failed
          - Cancelled
          - Processing
      description: "Transaction status values"

  currency:
    - type: category
      parameters:
        categories:
          - USD
          - EUR
          - GBP
          - JPY
          - CAD
          - AUD
          - CHF
          - CNY
      description: "Supported currencies"

relationships:
  account_type:
    - interest_rate
    - account_balance
    - transaction_type
  
  transaction_type:
    - transaction_amount
    - transaction_status
  
  credit_score:
    - interest_rate
    - account_balance
  
  currency:
    - transaction_amount
    - account_balance

terminology:
  account_type:
    - Checking
    - Savings
    - Money Market
    - CD
    - Investment
    - Credit Card
    - Loan
    - Mortgage
    - Retirement
    - Brokerage
  
  transaction_category:
    - Groceries
    - Dining
    - Transportation
    - Entertainment
    - Healthcare
    - Shopping
    - Utilities
    - Rent
    - Insurance
    - Education
    - Travel
    - Investment
    - Salary
    - Bonus
  
  payment_method:
    - ACH
    - Wire Transfer
    - Credit Card
    - Debit Card
    - Check
    - Cash
    - Mobile Payment
    - Cryptocurrency
  
  institution_type:
    - National Bank
    - Regional Bank
    - Credit Union
    - Online Bank
    - Investment Firm
    - Fintech
  
  risk_level:
    - Very Low
    - Low
    - Moderate
    - High
    - Very High
  
  investment_type:
    - Stocks
    - Bonds
    - Mutual Funds
    - ETFs
    - Real Estate
    - Commodities
    - Cryptocurrency
    - Options

business_rules:
  - rule_id: negative_balance_checking
    description: "Checking accounts can have negative balance (overdraft)"
    applies_to: [account_type, account_balance]
    condition: "account_type = 'Checking' ALLOWS account_balance < 0 AND >= -1000"
  
  - rule_id: savings_minimum_balance
    description: "Savings accounts require minimum balance"
    applies_to: [account_type, account_balance]
    condition: "account_type = 'Savings' REQUIRES account_balance >= 0"
  
  - rule_id: transaction_amount_by_type
    description: "Transaction amounts vary by type"
    applies_to: [transaction_type, transaction_amount]
    condition: "transaction_type = 'Fee' IMPLIES transaction_amount < 100"
  
  - rule_id: credit_score_interest_correlation
    description: "Higher credit scores get lower interest rates"
    applies_to: [credit_score, interest_rate]
    condition: "credit_score >= 750 IMPLIES interest_rate <= 5.0"
  
  - rule_id: cd_high_balance
    description: "CDs typically have higher minimum balances"
    applies_to: [account_type, account_balance]
    condition: "account_type = 'CD' IMPLIES account_balance >= 1000"
  
  - rule_id: investment_minimum
    description: "Investment accounts have minimum balance requirements"
    applies_to: [account_type, account_balance]
    condition: "account_type = 'Investment' IMPLIES account_balance >= 500"

value_distributions:
  transaction_type_frequency:
    Purchase: 0.40
    Transfer: 0.15
    Payment: 0.15
    Deposit: 0.10
    Withdrawal: 0.10
    Fee: 0.05
    Interest: 0.03
    Refund: 0.02
  
  account_type_distribution:
    Checking: 0.35
    Savings: 0.25
    Credit Card: 0.20
    Investment: 0.10
    Money Market: 0.05
    CD: 0.03
    Loan: 0.02
  
  credit_score_distribution:
    ranges:
      - range: [300, 579]
        label: Poor
        percentage: 0.16
      - range: [580, 669]
        label: Fair
        percentage: 0.18
      - range: [670, 739]
        label: Good
        percentage: 0.21
      - range: [740, 799]
        label: Very Good
        percentage: 0.25
      - range: [800, 850]
        label: Exceptional
        percentage: 0.20

validation_rules:
  - rule_id: transaction_sum_balance
    description: "Sum of transactions should affect balance"
    rule_type: aggregation
    condition: "SUM(deposits) - SUM(withdrawals) = balance_change"
  
  - rule_id: interest_calculation
    description: "Interest should be calculated correctly"
    rule_type: formula
    condition: "interest = balance * (interest_rate / 100) / 12"
  
  - rule_id: fee_reasonableness
    description: "Fees should be reasonable"
    rule_type: range
    condition: "fee_amount >= 0.50 AND fee_amount <= 50.00"

compliance_requirements:
  - Anti-Money Laundering (AML)
  - Know Your Customer (KYC)
  - FDIC Insurance Limits
  - Regulation E (Electronic Transfers)
  - Truth in Lending Act (TILA)
  - Fair Credit Reporting Act (FCRA)
